<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Drinkassistent üç∏</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#2b2b2b" />
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>

  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #fafafa;
      color: #222;
      margin: 0;
      padding: 1rem;
    }
    h1 { text-align: center; }
    .category { margin-top: 1rem; }
    label { display: block; cursor: pointer; }
    .drink {
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 10px;
      margin: 10px 0;
      background: #fff;
    }
    .possible { background: #c8f7c5; } /* Gr√∂n */
    .almost { background: #fff5c4; }   /* Gul */
    .missing { background: #f0f0f0; }
  </style>
</head>
<body>
  <h1>üçπ Drinkassistent</h1>
  <p>Markera vad du har hemma ‚Äì se vilka drinkar du kan (eller n√§stan kan) g√∂ra!</p>

  <div id="ingredients"></div>
  <h2>Dina m√∂jliga drinkar</h2>
  <div id="results"></div>

  <script>
    const categories = {
      "Alkohol": ["Vodka", "Gin", "Rom", "Whisky", "Tequila", "Cointreau"],
      "Juice / Frukt": ["Limejuice", "Citronjuice", "Apelsinjuice", "Ananasjuice"],
      "S√∂tning": ["Sockerlag", "Grenadin"],
      "√ñvrigt": ["Is", "Mynta", "Sodavatten", "Tonic"]
    };

    const drinks = [
      { name: "Margarita", ingredients: ["Tequila", "Cointreau", "Limejuice"] },
      { name: "Mojito", ingredients: ["Rom", "Limejuice", "Mynta", "Sodavatten", "Sockerlag"] },
      { name: "Whisky Sour", ingredients: ["Whisky", "Citronjuice", "Sockerlag"] },
      { name: "Vodka Tonic", ingredients: ["Vodka", "Tonic", "Is"] },
      { name: "Tequila Sunrise", ingredients: ["Tequila", "Apelsinjuice", "Grenadin", "Is"] },
      { name: "Gin Fizz", ingredients: ["Gin", "Citronjuice", "Sockerlag", "Sodavatten", "Is"] }
    ];

    const ingredientsDiv = document.getElementById('ingredients');
    const resultsDiv = document.getElementById('results');

    // Skapa checkboxar f√∂r varje kategori
    for (const [cat, items] of Object.entries(categories)) {
      const div = document.createElement('div');
      div.className = 'category';
      div.innerHTML = `<h3>${cat}</h3>`;
      items.forEach(i => {
        const id = i.replace(/\s/g, '_');
        div.innerHTML += `<label><input type="checkbox" value="${i}" id="${id}"> ${i}</label>`;
      });
      ingredientsDiv.appendChild(div);
    }

    document.querySelectorAll('input[type=checkbox]').forEach(cb => {
      cb.addEventListener('change', updateResults);
    });

    function updateResults() {
      const selected = Array.from(document.querySelectorAll('input:checked')).map(cb => cb.value);
      resultsDiv.innerHTML = '';

      drinks.forEach(drink => {
        const missing = drink.ingredients.filter(i => !selected.includes(i));
        const div = document.createElement('div');
        div.classList.add('drink');

        if (missing.length === 0) {
          div.classList.add('possible');
          div.innerHTML = `‚úÖ <strong>${drink.name}</strong> ‚Äì du har allt!`;
        } else if (missing.length <= 2) {
          div.classList.add('almost');
          div.innerHTML = `üü° <strong>${drink.name}</strong> ‚Äì saknar: ${missing.join(', ')}`;
        } else {
          div.classList.add('missing');
          div.innerHTML = `‚ùå <strong>${drink.name}</strong> ‚Äì saknar: ${missing.join(', ')}`;
        }

        resultsDiv.appendChild(div);
      });
    }
  </script>
</body>
</html>
