<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Drinkassistent üç∏</title>

<style>
body { font-family: system-ui, sans-serif; background: #fafafa; color: #222; margin: 0; padding: 1rem; }
h1 { text-align: center; }

#ingredients {
  display: grid;
  grid-template-columns: 1fr 1fr; /* Tv√• kolumner */
  gap: 1rem;
}

.left-column, .right-column {
  display: grid;
  gap: 0.5rem;
}

.category { display: grid; gap: 0.3rem; }
.category h3 { margin: 0; font-size: 1rem; }

label { display: block; cursor: pointer; }
.drink { border: 1px solid #ccc; border-radius: 10px; padding: 10px; margin: 10px 0; background: #fff; }
.possible { background: #c8f7c5; }
.almost { background: #fff5c4; }
.missing { background: #f0f0f0; }
.details { margin-top: 0.5rem; font-size: 0.9rem; display: none; }
.drink.open .details { display: block; }
.drink strong { cursor: pointer; display: inline-block; width: 100%; }
#surprise { display: block; margin: 1.5rem auto; padding: 0.7rem 1.5rem; font-size: 1.1rem; border: none; border-radius: 8px; background: #007bff; color: white; cursor: pointer; }
#surprise:hover { background: #005ecb; }
.highlight { border: 2px solid #ff9800; box-shadow: 0 0 10px #ff9800; }
.missing-ingredient { color: #ff3b3b; font-weight: bold; }
</style>
</head>
<body>
<h1>üçπ Drinkassistent</h1>
<p>Markera vad du har hemma ‚Äì se vilka drinkar du kan (eller n√§stan kan) g√∂ra!</p>
<div id="ingredients"></div>
<button id="surprise">üé≤ Surprise Me!</button>
<h2>Dina m√∂jliga drinkar</h2>
<div id="results"></div>

<script>
const categories = {
  "Alkohol": [
    "Vodka", "Gin", "Ljus Rom", "M√∂rk Rom","Whisky", "Tequila", "Cointreau", "Amaretto", "Kahlua", 
    "Campari", "Aperol", "Peach Schnapps", "Baileys", "Cognac", "Cachaca", "Dry Vermouth", "Sweet Vermouth"
  ],
  "Juice": [
    "Apelsinjuice", "Ananasjuice", "Tranb√§rsjuice", "Grapefruktjuice", "Limejuice", "Citronjuice"
  ],
  "Frukt / Garnering": [
    "Limeklyfta", "Apelsinskiva", "K√∂rsb√§r", "Mynta", "Citronklyfta", "Selleristj√§lk", "Oliv"
  ],
  "S√∂tning": [
    "Sockerlag", "Grenadin", "Farinsocker"
  ],
  "√ñvrigt": [
    "Sodavatten", "Tonic", "Cola", "Ginger Beer", "Kaffe", "Mj√∂lk", "Gr√§dde", "√Ñggvita", 
  ]
};

// Exempel med n√•gra drinkar, resten fylls p√• likadant
const drinks = [
  { name:"Gin & Tonic", ingredients:["Gin","Tonic","Limeklyfta"], recipe:[{item:"Gin",amount:"4 cl"},{item:"Tonic",amount:"Toppa upp"}], steps:"Fyll glas med is, h√§ll gin, toppa med tonic. Garnera med limeklyfta." },
  { name:"Negroni", ingredients:["Gin","Sweet Vermouth","Campari", "Apelsinskiva"], recipe:[{item:"Gin",amount:"2 cl"},{item:"Sweet Vermouth",amount:"2 cl"},{item:"Campari",amount:"2 cl"}], steps:"R√∂r drinken med is. Sila upp drinken i ett isfyllt glas. Garnera med apelsinskiva." },
  // ... resten av drinkarna ...
];

const ingredientsDiv = document.getElementById('ingredients');
const resultsDiv = document.getElementById('results');
const surpriseBtn = document.getElementById('surprise');

// Skapa tv√• kolumner
const leftColumn = document.createElement('div');
leftColumn.className = 'left-column';
const rightColumn = document.createElement('div');
rightColumn.className = 'right-column';
ingredientsDiv.appendChild(leftColumn);
ingredientsDiv.appendChild(rightColumn);

// Skapa checkboxar och placera r√§tt kolumn
for (const [cat, items] of Object.entries(categories)) {
  const categoryDiv = document.createElement('div');
  categoryDiv.className = 'category';
  const h3 = document.createElement('h3');
  h3.textContent = cat;
  categoryDiv.appendChild(h3);
  items.forEach(i=>{
    const id = encodeURIComponent(i);
    const label = document.createElement('label');
    label.innerHTML = `<input type="checkbox" value="${i}" id="${id}"> ${i}`;
    categoryDiv.appendChild(label);
  });

  // Placera i v√§nster eller h√∂ger kolumn
  if(cat === "Alkohol" || cat === "Frukt / Garnering") {
    leftColumn.appendChild(categoryDiv);
  } else {
    rightColumn.appendChild(categoryDiv);
  }
}

// Eventlisteners
document.querySelectorAll('input[type=checkbox]').forEach(cb=>cb.addEventListener('change', updateResults));
surpriseBtn.addEventListener('click', () => {
  document.querySelectorAll('.drink.highlight').forEach(d=>d.classList.remove('highlight','open'));
  if(resultsDiv.children.length===0) updateResults();
  const allDrinks = Array.from(resultsDiv.children);
  if(allDrinks.length===0) return;
  const random = allDrinks[Math.floor(Math.random()*allDrinks.length)];
  random.scrollIntoView({behavior:'smooth',block:'center'});
  random.classList.add('highlight','open');
});

function updateResults() {
  const selected = Array.from(document.querySelectorAll('input:checked')).map(cb=>cb.value);
  resultsDiv.innerHTML = '';

  const drinksWithStatus = drinks.map(drink => {
    const missing = drink.ingredients.filter(i=>!selected.includes(i));
    const selectedCount = drink.ingredients.length - missing.length;
    let status = 'missing';
    if(missing.length === 0) status = 'possible';
    else if(selectedCount > 0 && missing.length <= 2) status = 'almost';
    return { ...drink, status };
  });

  drinksWithStatus.sort((a,b)=>{
    const order = { possible:0, almost:1, missing:2 };
    return order[a.status]-order[b.status];
  });

  drinksWithStatus.forEach(drink=>{
    const div = document.createElement('div');
    div.classList.add('drink', drink.status);
    div.innerHTML=`<strong>${drink.name}</strong>`;

    const details = document.createElement('div');
    details.className='details';
    const baseItems = drink.recipe.map(r=>r.item);
    const garnishes = drink.ingredients.filter(i=>!baseItems.includes(i));
    details.innerHTML=`<h4>Recept:</h4><ul>${drink.recipe.map(r=>`<li class="${!selected.includes(r.item)?'missing-ingredient':''}">${r.amount} ${r.item}</li>`).join('')}${garnishes.map(g=>`<li class="${!selected.includes(g)?'missing-ingredient':''}">garnera med ${g}</li>`).join('')}</ul><p><em>${drink.steps}</em></p>`;
    div.appendChild(details);
    div.querySelector('strong').addEventListener('click',()=>{div.classList.toggle('open')});
    resultsDiv.appendChild(div);
  });
}
</script>
</body>
</html>
